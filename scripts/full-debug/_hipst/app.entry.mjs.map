{
  "version": 3,
  "sources": ["src/core/context.ts", "src/core/util.ts", "src/core/ui/reactive.ts", "src/core/comp.ts", "src/core/ui/comp.ts", "src/core/ui/factory.ts", "src/core/http/response.ts", "src/core/server/path.ts", "src/core/http/body.ts", "src/core/server/client.ts", "src/core/server/api.ts", "src/core/server/middleware.ts", "node:path", "examples/counter.api.ts", "examples/counter.app.ts"],
  "sourcesContent": [
    "import type { Component } from \"./comp\";\n\nexport interface Context<C extends Component> {\n  self: C;\n}\n\n// A value that can be a static literal or a function of a context\nexport type ValueOrFn<T, Ctx> = T | ((ctx: Ctx) => T);\n\nexport function resolveValue<T, Ctx>(ctx: Ctx, v: ValueOrFn<T, Ctx>): T {\n  return typeof v === \"function\" ? (v as (c: Ctx) => T)(ctx) : v;\n}\n\nexport type HandleFn<T, C extends Component> = (\n  ctx: Context<C>,\n  value: T\n) => C;",
    "import type { OptionalParam } from \"../types\";\nimport type { Component } from \"./comp\";\nimport { resolveValue, type Context, type HandleFn, type ValueOrFn } from \"./context\";\n\nexport type MethodType<S extends Component, T> = OptionalParam<T> extends true\n  ? <U extends S>(this: U, value?: ValueOrFn<T, Context<U>>) => U\n  : <U extends S>(this: U, value: ValueOrFn<T, Context<U>>) => U;\n\nexport function attachMethod<S extends Component, K extends string, T>(\n  obj: S,\n  name: K,\n  fn: HandleFn<T, S>\n): asserts obj is S & {\n  [P in K]: MethodType<S, T>;\n} {\n  if (name in obj) {\n    throw new Error(`Method ${name} already exists`);\n  }\n  Object.defineProperty(obj, name, {\n    value: (value?: ValueOrFn<T, Context<S>>) => {\n      const ctx = { self: obj } as Context<S>;\n      const resolved = resolveValue(ctx, value as any);\n      return fn(ctx, resolved as T);\n    },\n    writable: true,\n    configurable: true,\n    enumerable: false,\n  });\n}\n\n// Turn an object and a call-implementation into a callable proxy that preserves\n// method chaining semantics. Any method returning the original target will\n// return the proxy instead, enabling fluent APIs.\nexport function toCallable<T extends object, A extends any[], R = T>(\n  target: T,\n  callImpl: (thisObj: T, ...args: A) => R | T\n): T & ((...args: A) => R) {\n  const callable = function (this: any, ...args: A) {\n    const res = callImpl(target, ...args);\n    return (res === target ? proxy : res) as any;\n  } as unknown as T & ((...args: A) => R);\n\n  const handler: ProxyHandler<any> = {\n    get(_t, prop, receiver) {\n      // Allow unwrapping original target from the callable proxy\n      if (prop === \"__hipst_target__\") {\n        return target as any;\n      }\n      // Ensure built-in function machinery works on the callable proxy itself\n      // so accessing .apply/.call/.bind (or function metadata) does not forward to the target object.\n      if (\n        prop === \"apply\" ||\n        prop === \"call\" ||\n        prop === \"bind\" ||\n        prop === \"length\" ||\n        prop === \"name\" ||\n        prop === \"toString\"\n      ) {\n        // Reflect off the underlying callable function, not the target object\n        return Reflect.get(callable as any, prop, receiver);\n      }\n      const v = (target as any)[prop];\n      if (typeof v === \"function\") {\n        // Respect opt-out for wrapping (e.g., state facade proxy)\n        if ((v as any)?.__hipst_no_wrap__) return v;\n        return (...args: unknown[]) => {\n          const out = v.apply(target, args);\n          return out === target ? receiver : out;\n        };\n      }\n      return v;\n    },\n    set(_t, prop, value) {\n      (target as any)[prop] = value;\n      return true;\n    },\n    has(_t, prop) {\n      return prop in target;\n    },\n    ownKeys() {\n      return Reflect.ownKeys(target);\n    },\n    getOwnPropertyDescriptor(_t, prop) {\n      return Object.getOwnPropertyDescriptor(target, prop);\n    },\n  };\n\n  const proxy = new Proxy(callable, handler);\n  return proxy as any;\n}\n\n// Unwrap a callable proxy created by toCallable back to its original target\nexport function unwrap<T = any>(v: any): T {\n  if (v && (typeof v === \"object\" || typeof v === \"function\") && (v as any).__hipst_target__) {\n    return (v as any).__hipst_target__ as T;\n  }\n  return v as T;\n}\n",
    "// Lightweight fine-grained reactivity (track/trigger/effect)\n// Inspired by Vue/Solid patterns, minimal and framework-agnostic\n\ntype DepRef = { depsMap: Map<PropertyKey, Set<Eff>>; key: PropertyKey; set: Set<Eff> };\nexport type Eff = (() => void) & { __deps?: Set<DepRef>; __stopped?: true };\nlet activeEffect: Eff | null = null;\n\nconst bucket = new WeakMap<object, Map<PropertyKey, Set<Eff>>>();\n\nfunction cleanup(eff: Eff) {\n  const deps = eff.__deps;\n  if (!deps) return;\n  for (const ref of deps) {\n    ref.set.delete(eff);\n    if (ref.set.size === 0) ref.depsMap.delete(ref.key);\n  }\n  deps.clear();\n}\n\nexport function effect(fn: () => void): Eff {\n  const runner: Eff = (() => {\n    if ((runner as Eff).__stopped) return;\n    activeEffect = runner;\n    try {\n      cleanup(runner);\n      fn();\n    } finally {\n      activeEffect = null;\n    }\n  }) as Eff;\n  runner.__deps = new Set();\n  // run once to establish dependencies\n  runner();\n  return runner;\n}\n\nexport function stop(eff: Eff) {\n  (eff as Eff).__stopped = true;\n  cleanup(eff as Eff);\n}\n\nexport function track(target: object, key: PropertyKey) {\n  if (!activeEffect) return;\n  let depsMap = bucket.get(target);\n  if (!depsMap) bucket.set(target, (depsMap = new Map()));\n  let dep = depsMap.get(key);\n  if (!dep) depsMap.set(key, (dep = new Set()));\n  dep.add(activeEffect);\n  (activeEffect.__deps ||= new Set()).add({ depsMap, key, set: dep });\n}\n\nexport function trigger(target: object, key: PropertyKey) {\n  const depsMap = bucket.get(target);\n  if (!depsMap) return;\n  const dep = depsMap.get(key);\n  if (!dep) return;\n  // Copy to avoid infinite loops if effects mutate same key during run\n  [...dep].forEach((eff) => { if (!eff.__stopped) eff(); });\n}\n",
    "import type { Context, HandleFn } from \"./context\";\nimport { attachMethod, type MethodType } from \"./util\";\n\nexport class Component {\n  constructor() {\n    const handler: ProxyHandler<Component> = {\n      get(target, prop, receiver) {\n        const original = Reflect.get(target, prop, receiver);\n        if (typeof original === \"function\") {\n          // Respect special callable proxies that should not be wrapped\n          if ((original as any)?.__hipst_no_wrap__) return original;\n          return (...args: unknown[]) => {\n            const result = original.apply(target, args);\n            return result === target ? receiver : result;\n          };\n        }\n        return original;\n      },\n    };\n    return new Proxy(this, handler);\n  }\n\n  handle<T, K extends string, S extends Component>(\n    this: S,\n    name: K,\n    fn: HandleFn<T, S>\n  ): S & { [P in K]: MethodType<S, T> } {\n    attachMethod(this, name, fn);\n    return this;\n  }\n}\n",
    "import type { Properties as CSSProps } from \"csstype\";\nimport { Component } from \"../comp\";\nimport type { ValueOrFn } from \"../context\";\nimport { resolveValue } from \"../context\";\nimport { unwrap, toCallable } from \"../util\";\nimport type { UIContext, PropsCtx } from \"./context\";\nimport { track, trigger } from \"./reactive\";\nimport type { MethodType } from \"../util\";\n\ntype CSSProperties = CSSProps<string | number>;\n\n// A callable component where children value functions receive the full UIContext.\n// The parent in the context is refined to the provided generic `P` for better type inference via parentTyped().\nexport type WithCallable<C extends UIComponent<any, any, any>, P = UIComponent<any, any, any>> = C & {\n  (\n    ...children: Array<\n      | string\n      | UIComponent<any, any, any>\n      | ValueOrFn<string, UIContext<C, StateOf<C>, PropsOf<C>> & { parent?: P }>\n    >\n  ): C;\n  // Fallback overload to support define() call-time arguments that are not strictly children\n  // Example: const Checkbox = ui('input').define(...); Checkbox(true)\n  (...args: any[]): C;\n};\n\ntype StateProps<S extends object> = { [K in keyof S]: S[K] };\ntype WithState<C extends UIComponent<any, any, any>, NS extends object> = C extends UIComponent<infer TG, any, infer PP>\n  ? UIComponent<TG, NS, PP>\n  : UIComponent<any, NS, any>;\ntype WithProps<C extends UIComponent<any, any, any>, NP extends object> = C extends UIComponent<infer TG, infer SS, any>\n  ? UIComponent<TG, SS, NP>\n  : UIComponent<any, any, NP>;\n// Map current prop keys to chainable methods so all previously defined props remain available on the type\n// Only materialize prop methods for literal keys. If P is wide (e.g., Record<string, unknown>), produce none.\ntype PropKeySet<P extends object> = string extends keyof P ? never : keyof P & string;\ntype PropMethods<Tag extends string, S extends object, P extends object> = {\n  [K in PropKeySet<P>]: (\n    value?: ValueOrFn<P[K], UIContext<UIComponent<Tag, S, P>, S, P>>\n  ) => WithCallable<UIComponent<Tag, S, P>> & PropMethods<Tag, S, P>\n};\n\n// Helpers to extract generics from a UIComponent type\ntype TagOf<C extends UIComponent<any, any, any>> = C extends UIComponent<infer TG, any, any> ? TG : string;\ntype StateOf<C extends UIComponent<any, any, any>> = C extends UIComponent<any, infer SS, any> ? SS : {};\ntype PropsOf<C extends UIComponent<any, any, any>> = C extends UIComponent<any, any, infer PP> ? PP : {};\n\n// Derive DOM element and event map from Tag using lib.dom.d.ts\nexport type ElementFromTag<T extends string> =\n  T extends keyof HTMLElementTagNameMap ? HTMLElementTagNameMap[T] :\n  T extends keyof SVGElementTagNameMap ? SVGElementTagNameMap[T] : Element;\n\ntype EventMapFor<T extends string> =\n  T extends keyof HTMLElementTagNameMap ? HTMLElementEventMap :\n  T extends keyof SVGElementTagNameMap ? SVGElementEventMap : GlobalEventHandlersEventMap;\n// Typed, non-recursive state facade: callable + key accessors, refined return type for chaining\nexport type StateFacade<C extends UIComponent<any, any, any>, S extends object> = {\n  <K extends keyof S & string>(key: K, value: S[K]): WithCallable<C> & PropMethods<TagOf<C>, StateOf<C>, PropsOf<C>>;\n  <K extends string, V>(key: K, value: V): WithCallable<WithState<C, S & { [P in K]: V }>> & PropMethods<TagOf<C>, S & { [P in K]: V }, PropsOf<C>>;\n  <T extends Record<string, any>>(obj: T): WithCallable<WithState<C, S & T>> & PropMethods<TagOf<C>, S & T, PropsOf<C>>;\n} & StateProps<S> & { [key: string]: unknown };\n\nexport class UIComponent<Tag extends string = string, S extends object = {}, P extends object = {}> extends Component {\n  private _tag: Tag;\n  private _stateStore: Record<string, unknown> = {};\n  private _propsStore: Record<string, unknown> = {};\n  private _stylesStore: CSSProperties = {};\n  private _attrsStore: Record<string, unknown> = {};\n  private _stateProxy?: StateFacade<UIComponent<Tag, S, P>, S>;\n  private _propsProxy?: PropsCtx<P>;\n  private _children: Array<string | UIComponent<any, any, any> | ValueOrFn<string, any>> = [];\n  private _callArgs?: unknown[];\n  private _effects?: Array<(ctx: UIContext<UIComponent<Tag, S, P>, S, P>) => void>;\n  private _events: Record<string, Array<(ctx: any, ev?: Event) => unknown>> = {};\n  private _parent?: UIComponent<any, any>;\n  private _root?: UIComponent<any, any>;\n\n  constructor(tag: Tag) {\n    super();\n    this._tag = tag;\n  }\n\n  // identity & structure\n  public get tag() { return this._tag; }\n  public get parent() { return this._parent; }\n  public set parent(p: UIComponent<any, any> | undefined) { this._parent = p; }\n  public get root() { return this._root; }\n  public set root(r: UIComponent<any, any> | undefined) { this._root = r; }\n  public get children() { return this._children; }\n\n  // Context-aware reactive state facade: callable for init, property get/set for reactive access\n  public get state(): StateFacade<UIComponent<Tag, S, P>, S> {\n    if (!this._stateProxy) {\n      this._stateProxy = this.createStateFacade();\n    }\n    return this._stateProxy as StateFacade<UIComponent<Tag, S, P>, S>;\n  }\n  public get props(): PropsCtx<P> {\n    if (!this._propsProxy) {\n      this._propsProxy = this.createPropsFacade();\n    }\n    return this._propsProxy as PropsCtx<P>;\n  }\n  public get styles() { return this._stylesStore; }\n  public get attributes() { return this._attrsStore; }\n\n  // Helpers\n  private uiCtx(): UIContext<this, S, P> {\n    return {\n      self: this,\n      parent: this._parent,\n      root: this._root,\n      element: undefined,\n      state: this.state as unknown as import(\"./context\").StateCtx<S>,\n      props: this.props as any,\n      styles: this._stylesStore as this[\"styles\"],\n      attributes: this._attrsStore as this[\"attributes\"],\n      children: (this as any)._callArgs ?? [],\n    };\n  }\n\n  // Composition\n  public append(\n    ...kids: Array<\n      | string\n      | UIComponent<any, any, any>\n      | ValueOrFn<string, UIContext<this, S, P>>\n    >\n  ): this {\n    for (const k of kids) {\n      const real = unwrap(k);\n      if (real instanceof UIComponent) {\n        // cast through unknown to avoid generic variance issues on `state`\n        real.parent = this as unknown as UIComponent<any, any>;\n        const root = this._root ?? this.findRoot();\n        real.root = root as unknown as UIComponent<any, any> | undefined;\n        this._children.push(real);\n      } else {\n        // Ignore uninvoked factories so they don't render as text ValueOrFn\n        if (typeof k === \"function\" && (k as any).__hipst_factory__) {\n          continue;\n        }\n        this._children.push(k);\n      }\n    }\n    // reactive children list\n    trigger((this as any)._children, \"__list__\");\n    return this;\n  }\n\n  public nth(i: number): UIComponent<any, any, any> | undefined {\n    const k = this._children[i];\n    return k instanceof UIComponent ? k : undefined;\n  }\n\n  /**\n   * Initialize multiple state keys with strong typing and refine this component's state shape.\n   * Example: ui(\"div\").stateInit({ count: 0 }) => ctx.state.count inferred as number\n   */\n  public stateInit<T extends object>(obj: T): WithCallable<UIComponent<Tag, S & T>> & PropMethods<Tag, S & T, P> {\n    Object.assign(this._stateStore, obj);\n    for (const k in obj) trigger((this as any)._stateStore, k);\n    return (this as any).__hipst_callable__ as any;\n  }\n\n  /**\n   * Refine this component's state type without mutating runtime state. Useful for declaring shape.\n   */\n  public typed<T extends Record<string, any>>(): WithCallable<UIComponent<Tag, S & T>> & PropMethods<Tag, S & T, P> {\n    return (this as any).__hipst_callable__ as any;\n  }\n\n  /**\n   * Hint the expected parent type for children value functions. This helps TypeScript\n   * infer `parent.state` shape inside child lambdas, e.g.:\n   * ui(\"button\").parentTyped<{ count: number }>()(({ parent }) => parent!.state.count.toFixed(0))\n   */\n  public parentTyped<PS extends object>(): WithCallable<UIComponent<Tag, S>, UIComponent<any, PS>> & PropMethods<Tag, S, P> {\n    return (this as any).__hipst_callable__ as any;\n  }\n\n  // State / Attributes / Styles\n  public attr<T = unknown>(key: string, value: ValueOrFn<T, UIContext<this, S, P>>): this {\n    this._attrsStore[key] = value as any;\n    trigger(this._attrsStore, \"__keys__\");\n    trigger(this._attrsStore, key);\n    return this;\n  }\n\n  public style<K extends keyof CSSProperties>(key: K, value: ValueOrFn<NonNullable<CSSProperties[K]>, UIContext<this, S, P>>): this;\n  public style(obj: Partial<CSSProperties>): this;\n  public style(arg1: keyof CSSProperties | Partial<CSSProperties>, arg2?: ValueOrFn<unknown, UIContext<this, S, P>>): this {\n    if (typeof arg1 === \"object\") {\n      Object.assign(this._stylesStore, arg1);\n      for (const k of Object.keys(arg1)) trigger(this._stylesStore, k);\n      trigger(this._stylesStore, \"__keys__\");\n    } else {\n      (this._stylesStore as any)[arg1] = arg2 as any;\n      trigger(this._stylesStore, arg1);\n      // Also notify key observers so runtime effects can pick up newly added keys\n      trigger(this._stylesStore, \"__keys__\");\n    }\n    return this;\n  }\n\n  // Common shorthands\n  public id(v: ValueOrFn<string, UIContext<this, S, P>>): this { return this.attr(\"id\", v); }\n  public className(v: ValueOrFn<string, UIContext<this, S, P>>): this { return this.attr(\"class\", v); }\n  /**\n   * Alias for setting class attribute. Prefer using classes()/class() for class-first styling.\n   */\n  public class(v: ValueOrFn<string, UIContext<this, S, P>>): this { return this.attr(\"class\", v); }\n  /**\n   * Apply classes from string | string[] | Record<string, boolean>.\n   * Example:\n   *  .classes([\"btn\", ({state})=> state.on && \"on\"]) or .classes({ btn: true, on: ({state})=> state.on })\n   */\n  public classes(v: ValueOrFn<string | string[] | Record<string, any>, UIContext<this, S, P>>): this {\n    return this.attr(\"class\", (ctx: UIContext<this, S, P>) => {\n      const raw = typeof v === \"function\" ? (v as any)(ctx) : v;\n      if (Array.isArray(raw)) return raw.filter(Boolean).map(String).join(\" \");\n      if (raw && typeof raw === \"object\") {\n        const out: string[] = [];\n        for (const [k, val] of Object.entries(raw)) {\n          const vv = typeof val === \"function\" ? (val as any)(ctx) : val;\n          if (vv) out.push(k);\n        }\n        return out.join(\" \");\n      }\n      return String(raw ?? \"\");\n    });\n  }\n  // Simple attribute helpers (no conditional restrictions to avoid deep generic instantiation)\n  public htmlFor(v: ValueOrFn<string, UIContext<this, S, P>>): this { return this.attr(\"for\", v as any); }\n  public type(v: ValueOrFn<string, UIContext<this, S, P>>): this { return this.attr(\"type\", v as any); }\n  public checked(v: ValueOrFn<boolean, UIContext<this, S, P>>): this { return this.attr(\"checked\", v as any); }\n  public value(v: ValueOrFn<string | number, UIContext<this, S, P>>): this { return this.attr(\"value\", v as any); }\n\n  public display(v: ValueOrFn<CSSProperties[\"display\"], UIContext<this, S, P>>): this { return this.style(\"display\", v as any); }\n  public flexDirection(v: ValueOrFn<CSSProperties[\"flexDirection\"], UIContext<this, S, P>>): this { return this.style(\"flexDirection\", v as any); }\n  public flexCol(): this { return this.display(\"flex\").flexDirection(\"column\"); }\n  public flexRow(): this { return this.display(\"flex\").flexDirection(\"row\"); }\n  public p(v: ValueOrFn<string | number, UIContext<this, S, P>>): this;\n  public p(px: string | number | ValueOrFn<string | number, UIContext<this, S, P>>): this {\n    if (typeof px === \"function\") {\n      return this.style(\"padding\", (ctx: UIContext<this, S, P>) => {\n        const out = (px as (c: UIContext<this, S, P>) => string | number)(ctx);\n        return typeof out === \"number\" ? `${out}px` : out;\n      });\n    }\n    return this.style({ padding: typeof px === \"number\" ? `${px}px` : px });\n  }\n  public m(v: ValueOrFn<string | number, UIContext<this, S, P>>): this {\n    if (typeof v === \"function\") {\n      return this.style(\"margin\", (ctx: UIContext<this, S, P>) => {\n        const out = (v as (c: UIContext<this, S, P>) => string | number)(ctx);\n        return typeof out === \"number\" ? `${out}px` : out;\n      });\n    }\n    return this.style({ margin: typeof v === \"number\" ? `${v}px` : v });\n  }\n  public textCenter(): this { return this.style({ textAlign: \"center\" }); }\n\n  // Events (stored only) – typed per Tag using standard DOM event maps\n  public on<K extends keyof EventMapFor<Tag>>(type: K, fn: (ctx: UIContext<this, S, P>, ev: EventMapFor<Tag>[K]) => unknown): this;\n  public on(type: string, fn: (ctx: UIContext<this, S, P>, ev: Event) => unknown): this {\n    (this._events[type] ||= []).push(fn as unknown as (ctx: UIContext<UIComponent<any, any, any>, any, any>, ev?: Event) => unknown);\n    return this;\n  }\n\n  public onClick(fn: (ctx: UIContext<this, S, P>, ev: MouseEvent) => unknown): this {\n    return this.on(\"click\", fn as (c: UIContext<this, S, P>, e: MouseEvent) => unknown);\n  }\n\n  /**\n   * Register a reactive side-effect that runs with UIContext. It returns void and is cleaned up on unmount.\n   */\n  public effect(fn: (ctx: UIContext<this, S, P>) => void): this {\n    (this as any)._effects ||= [];\n    (this as any)._effects.push(fn as any);\n    return this;\n  }\n\n  /**\n   * Define a custom call handler for this component while preserving children-call syntax.\n   * Example:\n   *  const Checkbox = ui('input').type('checkbox').define(({ self }, checked?: boolean) => self.attr('checked', !!checked))\n   *  Checkbox(true) // -> sets checked\n   *  Checkbox(ui('span')(\"label\")) // -> appends children\n   */\n  public define(\n    invoker: (ctx: UIContext<this, S, P>) => this\n  ): (WithCallable<UIComponent<Tag, S, P>> & PropMethods<Tag, S, P>) & ((...args: any[]) => WithCallable<UIComponent<Tag, S, P>> & PropMethods<Tag, S, P>) {\n    const self = this as UIComponent<Tag, S, P>;\n    // Expose invoker on instance so blueprint-based cloning can preserve call-time behavior\n    (self as any).__hipst_invoker__ = invoker as any;\n    const flatten = (arr: any[]): any[] => {\n      const out: any[] = [];\n      for (const a of arr) {\n        if (Array.isArray(a)) out.push(...flatten(a)); else out.push(a);\n      }\n      return out;\n    };\n    const callable = toCallable<UIComponent<Tag, S, P>, any[], UIComponent<Tag, S, P>>(self, (s, ...args: any[]) => {\n      // Rewrapping semantics: capture call-time args as ctx.children and invoke user invoker.\n      (s as any)._callArgs = flatten(args);\n      trigger((s as any), \"__call_args__\");\n      const ctx = (s as any).uiCtx() as UIContext<UIComponent<Tag, S, P>, S, P>;\n      (invoker as any)(ctx);\n      return s;\n    });\n    // Ensure other helpers (e.g., state facade) return the new callable\n    (self as any).__hipst_callable__ = callable;\n    return callable as unknown as (WithCallable<UIComponent<Tag, S, P>> & PropMethods<Tag, S, P>) & ((...args: any[]) => WithCallable<UIComponent<Tag, S, P>> & PropMethods<Tag, S, P>);\n  }\n\n  // Define a custom chainable method (fluent interface) using UIContext\n  // Overloads to infer optional argument if handler's value parameter is optional\n  public prop<K extends string, T = unknown>(\n    name: K,\n    fn: (ctx: UIContext<this, S, P>, value?: T) => this\n  ): WithCallable<UIComponent<Tag, S, P & Record<K, T>>> & PropMethods<Tag, S, P & Record<K, T>>;\n  public prop<K extends string, T = unknown>(\n    name: K,\n    fn: (ctx: UIContext<this, S, P>, value: T) => this\n  ): WithCallable<UIComponent<Tag, S, P & Record<K, T>>> & PropMethods<Tag, S, P & Record<K, T>>;\n  public prop<K extends string, T = unknown>(\n    name: K,\n    fn: (ctx: UIContext<this, S, P>, value: T | undefined) => this\n  ): WithCallable<UIComponent<Tag, S, P & Record<K, T>>> & PropMethods<Tag, S, P & Record<K, T>> {\n    if ((this as any)[name]) {\n      throw new Error(`Method ${String(name)} already exists`);\n    }\n    // Persist handler definition so blueprint clones can reattach methods bound to the new instance\n    const defs = ((this as any).__hipst_prop_defs__ ||= {});\n    defs[String(name)] = fn;\n    Object.defineProperty(this, name, {\n      // Accept optional value at runtime; compile-time optionality comes from overloads/MethodType\n      value: (value?: ValueOrFn<T, UIContext<this, S, P>>) => {\n        // Persist raw prop value for cross-prop referencing via ctx.props\n        (this as any)._propsStore[String(name)] = value as unknown;\n        trigger((this as any)._propsStore, String(name));\n        const ctx = this.uiCtx();\n        const resolved = resolveValue(ctx, value as any);\n        return fn(ctx, resolved as T);\n      },\n      writable: true,\n      configurable: true,\n      enumerable: false,\n    });\n    return (this as any).__hipst_callable__ as any;\n  }\n\n  private findRoot(): this | undefined {\n    let p: this | undefined = this;\n    while (p && p.parent) p = p.parent as this;\n    return p;\n  }\n\n  private createStateFacade() {\n    const self = this as UIComponent<Tag, S, P>;\n    // callable initializer\n    const init = function (this: unknown, keyOrObj: unknown, value?: unknown) {\n      if (keyOrObj && typeof keyOrObj === \"object\" && !Array.isArray(keyOrObj)) {\n        const obj = keyOrObj as Record<string, unknown>;\n        for (const k of Object.keys(obj)) {\n          (self as any)._stateStore[k] = obj[k];\n          trigger((self as any)._stateStore, k);\n        }\n      } else {\n        const k = String(keyOrObj as any);\n        (self as any)._stateStore[k] = value;\n        trigger((self as any)._stateStore, k);\n      }\n      // return the component instance for chaining; Component proxy will map to receiver\n      return self as any;\n    } as unknown as StateFacade<UIComponent<Tag, S, P>, S>;\n    // wrap with proxy to support property get/set reactivity\n    const proxy: any = new Proxy(init, {\n      get(_t, prop: any, _r) {\n        // Preserve function properties (name, length, bind, etc.)\n        const fnVal = Reflect.get(init as any, prop, _r);\n        if (fnVal !== undefined) return fnVal;\n        if (typeof prop === \"string\") {\n          track((self as any)._stateStore, prop);\n          const raw = (self as any)._stateStore[prop];\n          const ctx: UIContext<UIComponent<Tag, S, P>, S, P> = {\n            self,\n            parent: self.parent,\n            root: self.root,\n            element: undefined,\n            state: proxy as any,\n            props: self.props as any,\n            styles: (self as any)._stylesStore as any,\n            attributes: (self as any)._attrsStore as any,\n            children: ((self as any)._callArgs ?? []) as unknown[],\n          } as any;\n          return resolveValue(ctx, raw as any);\n        }\n        return undefined as any;\n      },\n      set(_t, prop: any, value: any) {\n        if (typeof prop !== \"string\") return Reflect.set(init as any, prop, value);\n        const old = (self as any)._stateStore[prop];\n        (self as any)._stateStore[prop] = value;\n        if (old !== value) trigger((self as any)._stateStore, prop);\n        return true;\n      },\n      deleteProperty(_t, prop: any) {\n        if (typeof prop !== \"string\") return Reflect.deleteProperty(init as any, prop);\n        const ok = delete (self as any)._stateStore[prop];\n        trigger((self as any)._stateStore, prop);\n        return ok;\n      },\n      apply(_t, _thisArg, args: any[]) {\n        // allow calling as function: state(key, value) OR state({ ...obj })\n        const [arg1, arg2] = args as [any, any];\n        if (arg1 && typeof arg1 === \"object\" && !Array.isArray(arg1)) {\n          for (const k of Object.keys(arg1)) {\n            (self as any)._stateStore[k] = arg1[k];\n            trigger((self as any)._stateStore, k);\n          }\n        } else {\n          (self as any)._stateStore[arg1] = arg2;\n          trigger((self as any)._stateStore, arg1);\n        }\n        return (self as any).__hipst_callable__ ?? (self as any);\n      },\n    });\n    // prevent higher-level wrapping (Component/toCallable) from overriding proxy behavior\n    proxy.__hipst_no_wrap__ = true;\n    return proxy;\n  }\n\n  private createPropsFacade() {\n    const self = this as UIComponent<Tag, S, P>;\n    const proxy: any = new Proxy({}, {\n      get(_t, prop: any, _r) {\n        if (typeof prop !== \"string\") return undefined as any;\n        track((self as any)._propsStore, prop);\n        const raw = (self as any)._propsStore[prop];\n        const ctx: UIContext<UIComponent<Tag, S, P>, S, P> = {\n          self,\n          parent: self.parent,\n          root: self.root,\n          element: undefined,\n          state: self.state as any,\n          props: proxy as any,\n          styles: (self as any)._stylesStore as any,\n          attributes: (self as any)._attrsStore as any,\n          children: ((self as any)._callArgs ?? []) as unknown[],\n        } as any;\n        return resolveValue(ctx, raw as any);\n      },\n      set(_t, prop: any, value: any) {\n        if (typeof prop !== \"string\") return Reflect.set({}, prop, value);\n        const old = (self as any)._propsStore[prop];\n        (self as any)._propsStore[prop] = value;\n        if (old !== value) trigger((self as any)._propsStore, prop);\n        return true;\n      },\n      deleteProperty(_t, prop: any) {\n        if (typeof prop !== \"string\") return false;\n        const ok = delete (self as any)._propsStore[prop];\n        trigger((self as any)._propsStore, prop);\n        return ok;\n      },\n    });\n    // prevent higher-level wrapping\n    proxy.__hipst_no_wrap__ = true;\n    return proxy as PropsCtx<P>;\n  }\n}\n",
    "import { toCallable } from \"../util\";\nimport { trigger } from \"./reactive\";\nimport { UIComponent, type WithCallable } from \"./comp\";\nimport type { UIContext } from \"./context\";\nimport type { ValueOrFn } from \"../context\";\n\nexport class HtmlRoot extends UIComponent<\"__html_root__\"> {\n  private _title?: ValueOrFn<string, UIContext<this>>;\n  private _metas: Record<string, ValueOrFn<string, UIContext<this>>> = {};\n  private _css: string[] = [];\n\n  constructor() {\n    super(\"__html_root__\");\n    this.root = this;\n  }\n\n  title(v: ValueOrFn<string, UIContext<this>>): this {\n    this._title = v;\n    return this;\n  }\n\n  meta(name: string, content: ValueOrFn<string, UIContext<this>>): this {\n    this._metas[name] = content;\n    return this;\n  }\n\n  /**\n   * Declare a CSS file to be included by the client runtime bundle when CSR is enabled.\n   * The path should be resolvable from the project root (absolute or relative).\n   */\n  css(path: string): this {\n    if (path) this._css.push(path);\n    return this;\n  }\n\n  get headTitle() { return this._title; }\n  get headMetas() { return this._metas; }\n  get headCss() { return this._css.slice(); }\n}\n\nfunction flatten<T>(arr: T[]): T[] {\n  const out: T[] = [];\n  for (const a of arr as any) {\n    if (Array.isArray(a)) out.push(...flatten(a));\n    else out.push(a);\n  }\n  return out;\n}\n\n// Overloads leverage lib.dom.d.ts so tag names are inferred and validated\nexport function ui<K extends keyof HTMLElementTagNameMap>(tag: K): WithCallable<UIComponent<K>>;\nexport function ui<K extends keyof SVGElementTagNameMap>(tag: K): WithCallable<UIComponent<K>>;\nexport function ui<Tag extends string>(tag: Tag): WithCallable<UIComponent<Tag>>;\nexport function ui(tag: string): WithCallable<UIComponent<string>> {\n  const base = new UIComponent<string>(tag as string);\n  const callable = toCallable<UIComponent<string>, any[], UIComponent<string>>(base, (self, ...children: any[]) => {\n    const kids = flatten(children);\n    (self as UIComponent<any>).append(...kids as any);\n    return self;\n  });\n  // keep a back ref for methods that need to return the callable proxy (e.g., state facade)\n  (base as any).__hipst_callable__ = callable;\n  return callable;\n}\n\nexport function html(): WithCallable<HtmlRoot> {\n  const base = new HtmlRoot();\n  const callable = toCallable<HtmlRoot, any[], HtmlRoot>(base, (self, ...children: any[]) => {\n    const kids = flatten(children);\n    (self as UIComponent<any>).append(...kids as any);\n    return self;\n  });\n  (base as any).__hipst_callable__ = callable;\n  return callable;\n}\n\n/**\n * Create a single-call factory component from a builder or a ui() blueprint.\n * Usage:\n *  const Text1 = component(() => ui('span').class('txt'));\n *  const Text2 = component(ui('span').class('txt'));\n *  html()(Text1('hello'), Text2())\n */\nexport function component<F extends WithCallable<UIComponent<any, any, any>> & Record<string, any>>(\n  builder: () => F\n): F;\n\n// Overload: component(ui('div')) – simpler blueprint-based factory\nexport function component<F extends WithCallable<UIComponent<any, any, any>> & Record<string, any>>(\n  template: F\n): F;\n\n// Implementation union\nexport function component<F extends WithCallable<UIComponent<any, any, any>> & Record<string, any>>(\n  arg: any\n): F {\n  type ApplyFn = (instCallable: F) => F;\n\n  const isTemplate = arg && typeof arg === \"function\" && (arg as any).__hipst_target__ instanceof UIComponent;\n  const templateCallable: F | null = isTemplate ? (arg as F) : null;\n  const builder: (() => F) | null = isTemplate ? null : (arg as () => F);\n\n  // Get a sample callable to introspect available methods for Proxy forwarding\n  const sampleCallable: F = templateCallable ?? (builder!() as F);\n  const sampleTarget = (sampleCallable as any).__hipst_target__ as UIComponent<any, any, any>;\n\n  const cloneFromTemplate = (): F => {\n    const tmpl = templateCallable ? ((templateCallable as any).__hipst_target__ as UIComponent<any, any, any>) : sampleTarget;\n    const base = new UIComponent<string>(tmpl.tag as string) as UIComponent<any, any, any>;\n\n    // Copy runtime stores (shallow) – state, props (raw), styles, attributes, events\n    Object.assign((base as any)._stateStore, (tmpl as any)._stateStore);\n    Object.assign((base as any)._propsStore, (tmpl as any)._propsStore);\n    Object.assign((base as any)._stylesStore, (tmpl as any)._stylesStore);\n    Object.assign((base as any)._attrsStore, (tmpl as any)._attrsStore);\n    const evs = (tmpl as any)._events || {};\n    for (const k of Object.keys(evs)) {\n      (base as any)._events[k] = [...(evs[k] as any[])];\n    }\n\n    // Rebuild custom prop methods from definitions to bind to the new instance\n    const defs = (tmpl as any).__hipst_prop_defs__ as Record<string, Function> | undefined;\n    if (defs) {\n      for (const [name, fn] of Object.entries(defs)) {\n        (base as any).prop(name, fn as any);\n      }\n    }\n\n    // Preserve define() call-time semantics if any (rewrapping: args are exposed via ctx.children)\n    const inv = (tmpl as any).__hipst_invoker__ as ((ctx: UIContext<any, any, any>) => any) | undefined;\n    const callable = inv\n      ? toCallable(base, (s: UIComponent<any, any, any>, ...args: any[]) => {\n          // Rewrapping define: capture args for ctx.children and invoke user invoker.\n          const kids = flatten(args);\n          (s as any)._callArgs = kids;\n          // signal reactive consumers of ctx.children\n          trigger((s as any), \"__call_args__\");\n          const ctx = (s as any).uiCtx();\n          (inv as any)(ctx);\n          return s;\n        })\n      : toCallable(base, (self: UIComponent<any, any, any>, ...children: any[]) => {\n          const kids = flatten(children);\n          (self as UIComponent<any>).append(...kids as any);\n          return self;\n        });\n    (base as any).__hipst_callable__ = callable;\n    return callable as F;\n  };\n\n  const createInst = (): F => {\n    return templateCallable ? cloneFromTemplate() : (builder!() as F);\n  };\n\n  const makeFactory = (applies: ApplyFn[]): F => {\n    const callableFactory = ((...children: any[]) => {\n      let inst = createInst();\n      for (const apply of applies) inst = apply(inst);\n      return (inst as any)(...children) as F;\n    }) as unknown as F;\n\n    // mark as factory so append() ignores plain references\n    (callableFactory as any).__hipst_factory__ = true;\n\n    // Proxy to forward method calls into queued apply functions, returning a new factory each time\n    const proxy = new Proxy(callableFactory as any, {\n      get(target, prop, receiver) {\n        if (prop === \"__hipst_factory__\") return true;\n        const v = (sampleTarget as any)[prop];\n        if (typeof v === \"function\") {\n          return (...args: any[]) => makeFactory([...applies, (instCallable: F) => {\n            const t = (instCallable as any).__hipst_target__ as UIComponent<any, any, any>;\n            const out = (t as any)[prop](...args);\n            // If method returns a callable (e.g., define), switch to it; else keep current callable\n            return typeof out === \"function\" ? (out as F) : instCallable;\n          }]);\n        }\n        return Reflect.get(target, prop, receiver);\n      },\n    });\n\n    return proxy as F;\n  };\n\n  return makeFactory([]);\n}\n",
    "export type Finalish = Response | FinalResult | BodyInit | object | null | undefined;\n\nexport interface FinalResult {\n  __hipst_final: true;\n  status: number;\n  headers: Record<string, string>;\n  body: BodyInit | null;\n}\n\n// Type helper that preserves the response body type at the type level only.\n// Runtime shape is still FinalResult; __type is never emitted.\nexport type FinalResultOf<T> = FinalResult & { __type?: T };\n\nexport interface ResponseBuilder {\n  status: (code: number) => ResponseBuilder;\n  header: (key: string | Record<string, string>, value?: string) => ResponseBuilder;\n  res: <T>(body: T) => FinalResultOf<T>;\n}\n\nexport function createResponseKit(initStatus = 200, initHeaders: Record<string, string> = {}) {\n  let status = initStatus;\n  const headers: Record<string, string> = { ...initHeaders };\n  const builder: ResponseBuilder = {\n    status(c: number) {\n      status = c;\n      return builder;\n    },\n    header(key: string | Record<string, string>, value?: string) {\n      if (typeof key === \"string\") headers[key] = value ?? \"\";\n      else Object.assign(headers, key);\n      return builder;\n    },\n    res(body: any): FinalResult {\n      let out: BodyInit | null = null;\n      if (body === null || body === undefined) out = null;\n      else if (\n        body instanceof Blob ||\n        body instanceof ArrayBuffer ||\n        body instanceof ReadableStream ||\n        typeof body === \"string\"\n      ) out = body as any;\n      else {\n        headers[\"Content-Type\"] = headers[\"Content-Type\"] || \"application/json\";\n        out = JSON.stringify(body);\n      }\n      return { __hipst_final: true, status, headers, body: out };\n    },\n  };\n  return {\n    statusFn: (c: number) => builder.status(c),\n    headerFn: (k: any, v?: any) => builder.header(k, v),\n    resFn: ((b: any) => builder.res(b)) as <T>(b: T) => FinalResultOf<T>,\n  };\n}\n\nexport function toResponse(out: Finalish): Response {\n  if (out instanceof Response) return out;\n  const r = out as FinalResult;\n  if (r && (r as any).__hipst_final) {\n    const headers = new Headers(r.headers);\n    return new Response(r.body, { status: r.status, headers });\n  }\n  // default JSON\n  return new Response(JSON.stringify(out), {\n    status: 200,\n    headers: { \"Content-Type\": \"application/json\" },\n  });\n}\n",
    "const COMPILED_CACHE = new Map<string, { regex: RegExp; keys: string[] }>();\n\nexport function compilePath(pattern: string) {\n  let cached = COMPILED_CACHE.get(pattern);\n  if (cached) return cached;\n  const parts = pattern.split(\"/\").filter(Boolean);\n  const keys: string[] = [];\n  const regexParts = parts.map((p) => {\n    if (p.startsWith(\":\")) { keys.push(p.slice(1)); return \"([^/]+)\"; }\n    return p.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n  });\n  const regex = new RegExp(\"^/\" + regexParts.join(\"/\") + \"/*$\");\n  cached = { regex, keys };\n  COMPILED_CACHE.set(pattern, cached);\n  return cached;\n}\n\nexport function applyParams(pattern: string, params?: Record<string, string | number>): string {\n  if (!params) return pattern;\n  return pattern.replace(/:([A-Za-z0-9_]+)/g, (_, k) => {\n    const v = (params as any)[k];\n    if (v === undefined || v === null) throw new Error(`Missing param :${k}`);\n    return encodeURIComponent(String(v));\n  });\n}\n",
    "export async function parseBody(req: Request, headers: Headers): Promise<any> {\n  let body: any = undefined;\n  try {\n    const contentType = headers.get(\"content-type\") || \"\";\n    if (contentType.includes(\"application/json\")) body = await req.json();\n    else if (contentType.includes(\"text/\")) body = await req.text();\n    else body = await req.arrayBuffer();\n  } catch {}\n  return body;\n}\n",
    "import { HttpMethod } from \"../http/types\";\nimport { applyParams } from \"./path\";\nimport type { ApiComponent, MethodSpec } from \"./api\";\n\nexport interface ApiClientRequestArgs {\n  params?: Record<string, string | number>;\n  query?: Record<string, any>;\n  body?: any;\n  init?: RequestInit;\n  baseUrl?: string; // optional override base URL (default: same origin)\n  headers?: HeadersInit;\n}\n\ntype InferGetArgs<S> = Omit<ApiClientRequestArgs, \"body\" | \"params\" | \"query\"> & {\n  params?: S extends { params: infer P } ? P : Record<string, any>;\n  query?: S extends { query: infer Q } ? Q : Record<string, any>;\n};\n\ntype InferPostArgs<S> = Omit<ApiClientRequestArgs, \"params\" | \"query\" | \"body\"> & {\n  params?: S extends { params: infer P } ? P : Record<string, any>;\n  query?: S extends { query: infer Q } ? Q : Record<string, any>;\n  body?: S extends { body: infer B } ? B : unknown;\n};\n\ntype InferPutArgs<S> = Omit<ApiClientRequestArgs, \"params\" | \"query\" | \"body\"> & {\n  params?: S extends { params: infer P } ? P : Record<string, any>;\n  query?: S extends { query: infer Q } ? Q : Record<string, any>;\n  body?: S extends { body: infer B } ? B : unknown;\n};\n\ntype InferPatchArgs<S> = Omit<ApiClientRequestArgs, \"params\" | \"query\" | \"body\"> & {\n  params?: S extends { params: infer P } ? P : Record<string, any>;\n  query?: S extends { query: infer Q } ? Q : Record<string, any>;\n  body?: S extends { body: infer B } ? B : unknown;\n};\n\ntype InferDeleteArgs<S> = Omit<ApiClientRequestArgs, \"body\" | \"params\" | \"query\"> & {\n  params?: S extends { params: infer P } ? P : Record<string, any>;\n  query?: S extends { query: infer Q } ? Q : Record<string, any>;\n};\n\ntype MethodsOf<N> = N extends ApiComponent<any, infer M> ? M : Partial<MethodSpec>;\n\nexport type ApiClientOf<N extends ApiComponent<any, any>> = MethodsOf<N> extends infer M\n  ? (M extends { GET: infer G }\n      ? { get: (args?: InferGetArgs<G>) => Promise<G extends { res: infer R } ? R : unknown> }\n      : {})\n    &\n    (M extends { POST: infer H }\n      ? { post: (args?: InferPostArgs<H>) => Promise<H extends { res: infer R } ? R : unknown> }\n      : {})\n    &\n    (M extends { PUT: infer U }\n      ? { put: (args?: InferPutArgs<U>) => Promise<U extends { res: infer R } ? R : unknown> }\n      : {})\n    &\n    (M extends { PATCH: infer P }\n      ? { patch: (args?: InferPatchArgs<P>) => Promise<P extends { res: infer R } ? R : unknown> }\n      : {})\n    &\n    (M extends { DELETE: infer D }\n      ? { delete: (args?: InferDeleteArgs<D>) => Promise<D extends { res: infer R } ? R : unknown> }\n      : {})\n  : never;\n\nexport function createClientFacade<N extends ApiComponent<any, any>>(node: N): ApiClientOf<N> {\n  const getPattern = () => node.fullPattern();\n\n  const buildUrl = (method: HttpMethod, args?: ApiClientRequestArgs): string => {\n    const pat = applyParams(getPattern(), args?.params);\n    const base = args?.baseUrl ? String(args.baseUrl).replace(/\\/$/, \"\") : \"\";\n    const url = base + pat;\n    const query = args?.query || {};\n    const usp = new URLSearchParams();\n    for (const [k, v] of Object.entries(query)) {\n      if (v === undefined || v === null) continue;\n      if (Array.isArray(v)) v.forEach((it) => usp.append(k, String(it)));\n      else usp.append(k, String(v));\n    }\n    const qs = usp.toString();\n    return qs ? url + (url.includes(\"?\") ? \"&\" : \"?\") + qs : url;\n  };\n\n  const parseBody = async (res: Response): Promise<any> => {\n    if (res.status === 204) return null;\n    const ct = res.headers.get(\"content-type\") || \"\";\n    if (/application\\/json/i.test(ct)) return await res.json();\n    return await res.text();\n  };\n\n  const call = async (method: HttpMethod, args?: ApiClientRequestArgs): Promise<any> => {\n    const url = buildUrl(method, args);\n    const headers = new Headers(args?.headers || {});\n    let bodyInit: BodyInit | undefined = undefined;\n    const hasBody = args && Object.prototype.hasOwnProperty.call(args, \"body\");\n    if (hasBody) {\n      const b = (args as any).body;\n      if (\n        b instanceof Blob ||\n        b instanceof ArrayBuffer ||\n        b instanceof FormData ||\n        typeof b === \"string\" ||\n        (typeof ReadableStream !== \"undefined\" && b instanceof ReadableStream)\n      ) bodyInit = b as any;\n      else { headers.set(\"Content-Type\", headers.get(\"Content-Type\") || \"application/json\"); bodyInit = JSON.stringify(b); }\n    }\n    const init: RequestInit = { ...(args?.init || {}), method, body: bodyInit, headers } as any;\n    const fetcher = (globalThis as any).fetch as typeof fetch;\n    if (typeof fetcher !== \"function\") throw new Error(\"global fetch is not available\");\n    const res = await fetcher(url, init);\n    if (!res.ok) {\n      const txt = await res.text().catch(() => \"\");\n      throw new Error(method + \" \" + getPattern() + \" failed: \" + res.status + \" \" + res.statusText + (txt ? (\"\\n\" + txt) : \"\"));\n    }\n    return parseBody(res);\n  };\n\n  const out: any = {\n    get: (args?: Omit<ApiClientRequestArgs, \"body\">) => call(\"GET\", args as any),\n    post: (args?: ApiClientRequestArgs) => call(\"POST\", args),\n    put: (args?: ApiClientRequestArgs) => call(\"PUT\", args),\n    patch: (args?: ApiClientRequestArgs) => call(\"PATCH\", args),\n    delete: (args?: Omit<ApiClientRequestArgs, \"body\">) => call(\"DELETE\", args as any),\n  };\n  return out as ApiClientOf<N>;\n}\n",
    "import { Component } from \"../comp\";\nimport { HttpMethod } from \"../http/types\";\nimport { Finalish, FinalResult, ResponseBuilder, createResponseKit, type FinalResultOf } from \"../http/response\";\nimport { Middleware, MiddlewareContext } from \"./middleware\";\nimport { compilePath } from \"./path\";\nimport { parseBody } from \"../http/body\";\nimport { createClientFacade } from \"./client\";\nimport type { ApiClientOf } from \"./client\";\n\nexport type ApiContext<L extends object = {}> = {\n  self: ApiComponent<any>;\n  req: Request;\n  query: Record<string, string>;\n  param: Record<string, string>;\n  header: (key: string | Record<string, string>, value?: string) => ResponseBuilder;\n  status: (code: number) => ResponseBuilder;\n  res: <T>(body: T) => FinalResultOf<T>;\n  body: any;\n  headers: Headers;\n} & L;\n\n// Middleware types imported from ./middleware\n\nexport type Handler<L extends object = {}> = (ctx: ApiContext<L>) => Promise<Finalish> | Finalish;\n\n// Helper: Finalish with preserved body type via FinalResultOf\nexport type FinalishOf<T> = Promise<FinalResultOf<T> | T> | FinalResultOf<T> | T;\n\n// Method type specs captured at the type level (phantom only)\nexport type GetSpec<\n  Q = Record<string, any>,\n  P = Record<string, string | number>,\n  R = unknown\n> = { query: Q; params: P; res: R };\nexport type PostSpec<\n  Q = Record<string, any>,\n  P = Record<string, string | number>,\n  B = any,\n  R = unknown\n> = { query: Q; params: P; body: B; res: R };\nexport type PutSpec<\n  Q = Record<string, any>,\n  P = Record<string, string | number>,\n  B = any,\n  R = unknown\n> = { query: Q; params: P; body: B; res: R };\nexport type PatchSpec<\n  Q = Record<string, any>,\n  P = Record<string, string | number>,\n  B = any,\n  R = unknown\n> = { query: Q; params: P; body: B; res: R };\nexport type DeleteSpec<\n  Q = Record<string, any>,\n  P = Record<string, string | number>,\n  R = unknown\n> = { query: Q; params: P; res: R };\nexport type MethodSpec = {\n  GET?: GetSpec<any, any, any>;\n  POST?: PostSpec<any, any, any, any>;\n  PUT?: PutSpec<any, any, any, any>;\n  PATCH?: PatchSpec<any, any, any, any>;\n  DELETE?: DeleteSpec<any, any, any>;\n};\n\nexport type ApiDocNode = {\n  path: string;\n  methods: HttpMethod[];\n  meta?: Record<string, any>;\n  children: ApiDocNode[];\n};\n\nexport class ApiComponent<L extends object = {}, M extends Partial<MethodSpec> = {}> extends Component {\n  public readonly basePath: string;\n  private handlers: Partial<Record<HttpMethod, Handler<L>>> = {};\n  private children: ApiComponent<any>[] = [];\n  private parent?: ApiComponent<any>;\n  private middlewares: Array<Middleware<any, any>> = [];\n  public readonly client: ApiClientOf<ApiComponent<L, M>>;\n  // Perf caches (invalidated on mutations)\n  private _fullPatternCache?: string;\n  private _compiledCache?: ReturnType<typeof compilePath>;\n  private _mwChainCache?: Array<Middleware<any, any>>;\n  private _docMeta?: Record<string, any>;\n\n  constructor(basePath: string) {\n    super();\n    this.basePath = basePath.startsWith(\"/\") ? basePath : \"/\" + basePath;\n    this.client = createClientFacade(this as any) as any;\n  }\n\n  private invalidateCachesDeep(): void {\n    this._fullPatternCache = undefined;\n    this._compiledCache = undefined;\n    this._mwChainCache = undefined;\n    for (const ch of this.children) ch.invalidateCachesDeep();\n  }\n\n  private invalidateMwChainDeep(): void {\n    this._mwChainCache = undefined;\n    for (const ch of this.children) ch.invalidateMwChainDeep();\n  }\n\n  route(child: ApiComponent<any, any>): this {\n    child.parent = this;\n    this.children.push(child);\n    // parent changed => child's pattern/chain depend on it\n    child.invalidateCachesDeep();\n    return this;\n  }\n\n  use<Add extends object>(mw: Middleware<L, Add>): ApiComponent<L & Add, M> {\n    this.middlewares.push(mw as any);\n    // adding middleware affects chain for self and descendants\n    this.invalidateMwChainDeep();\n    return this as unknown as ApiComponent<L & Add, M>;\n  }\n\n  /**\n   * Attach free-form documentation metadata to this API node. Intended for docs generation.\n   */\n  doc(meta: Record<string, any>): this {\n    this._docMeta = { ...(this._docMeta || {}), ...(meta || {}) };\n    return this;\n  }\n\n  on(method: HttpMethod, handler: Handler<L>): this {\n    this.handlers[method] = handler as any;\n    return this;\n  }\n\n  // Typed HTTP methods capturing request/response types\n  // Overload A: explicit Spec generic\n  get<S extends GetSpec<any, any, any>>(\n    handler: (ctx: ApiContext<L> & { query: S[\"query\"]; param: S[\"params\"] }) => FinalishOf<S[\"res\"]>\n  ): ApiComponent<L, M & { GET: S }>;\n  // Overload B: infer or explicit with param order <Q, Pm, R>\n  get<Q = unknown, Pm = unknown, R = unknown>(\n    handler: (ctx: ApiContext<L> & { query: Q; param: Pm }) => FinalishOf<R>\n  ): ApiComponent<L, M & { GET: GetSpec<Q, Pm, R> }>;\n  get(handler: any): any { return this.on(\"GET\", handler as any) as any; }\n\n  // Overload A: explicit Spec generic\n  post<S extends PostSpec<any, any, any, any>>(\n    handler: (ctx: ApiContext<L> & { body: S[\"body\"]; query: S[\"query\"]; param: S[\"params\"] }) => FinalishOf<S[\"res\"]>\n  ): ApiComponent<L, M & { POST: S }>;\n  // Overload B: infer or explicit with param order <Q, Pm, B, R>\n  post<Q = unknown, Pm = unknown, B = unknown, R = unknown>(\n    handler: (ctx: ApiContext<L> & { body: B; query: Q; param: Pm }) => FinalishOf<R>\n  ): ApiComponent<L, M & { POST: PostSpec<Q, Pm, B, R> }>;\n  post(handler: any): any { return this.on(\"POST\", handler as any) as any; }\n\n  // Overload A: explicit Spec generic\n  put<S extends PutSpec<any, any, any, any>>(\n    handler: (ctx: ApiContext<L> & { body: S[\"body\"]; query: S[\"query\"]; param: S[\"params\"] }) => FinalishOf<S[\"res\"]>\n  ): ApiComponent<L, M & { PUT: S }>;\n  // Overload B: infer or explicit with param order <Q, Pm, B, R>\n  put<Q = unknown, Pm = unknown, B = unknown, R = unknown>(\n    handler: (ctx: ApiContext<L> & { body: B; query: Q; param: Pm }) => FinalishOf<R>\n  ): ApiComponent<L, M & { PUT: PutSpec<Q, Pm, B, R> }>;\n  put(handler: any): any { return this.on(\"PUT\", handler as any) as any; }\n\n  // Overload A: explicit Spec generic\n  patch<S extends PatchSpec<any, any, any, any>>(\n    handler: (ctx: ApiContext<L> & { body: S[\"body\"]; query: S[\"query\"]; param: S[\"params\"] }) => FinalishOf<S[\"res\"]>\n  ): ApiComponent<L, M & { PATCH: S }>;\n  // Overload B: infer or explicit with param order <Q, Pm, B, R>\n  patch<Q = unknown, Pm = unknown, B = unknown, R = unknown>(\n    handler: (ctx: ApiContext<L> & { body: B; query: Q; param: Pm }) => FinalishOf<R>\n  ): ApiComponent<L, M & { PATCH: PatchSpec<Q, Pm, B, R> }>;\n  patch(handler: any): any { return this.on(\"PATCH\", handler as any) as any; }\n\n  // Overload A: explicit Spec generic\n  delete<S extends DeleteSpec<any, any, any>>(\n    handler: (ctx: ApiContext<L> & { query: S[\"query\"]; param: S[\"params\"] }) => FinalishOf<S[\"res\"]>\n  ): ApiComponent<L, M & { DELETE: S }>;\n  // Overload B: infer or explicit with param order <Q, Pm, R>\n  delete<Q = unknown, Pm = unknown, R = unknown>(\n    handler: (ctx: ApiContext<L> & { query: Q; param: Pm }) => FinalishOf<R>\n  ): ApiComponent<L, M & { DELETE: DeleteSpec<Q, Pm, R> }>;\n  delete(handler: any): any { return this.on(\"DELETE\", handler as any) as any; }\n\n  /** Return a documentation tree for this ApiComponent and its children. */\n  describeDeep(): ApiDocNode {\n    const methods: HttpMethod[] = Object.keys(this.handlers) as HttpMethod[];\n    return {\n      path: this.fullPattern(),\n      methods,\n      meta: this._docMeta ? { ...this._docMeta } : undefined,\n      children: this.children.map((c) => c.describeDeep()),\n    };\n  }\n\n  public fullPattern(): string {\n    if (this._fullPatternCache) return this._fullPatternCache;\n    const parts: string[] = [];\n    let p: ApiComponent<any> | undefined = this as any;\n    const stack: string[] = [];\n    while (p) { stack.push(p.basePath); p = p.parent; }\n    for (let i = stack.length - 1; i >= 0; i--) parts.push(stack[i]!);\n    const joined = parts.join(\"\") || \"/\";\n    this._fullPatternCache = joined;\n    return joined;\n  }\n\n  match(pathname: string): { matched: boolean; params: Record<string, string> } {\n    const compiled = this._compiledCache || (this._compiledCache = compilePath(this.fullPattern()));\n    const m = compiled.regex.exec(pathname);\n    if (!m) return { matched: false, params: {} };\n    const params: Record<string, string> = {};\n    for (let i = 0; i < compiled.keys.length; i++) {\n      const key = compiled.keys[i];\n      const val = m[i + 1];\n      if (key !== undefined && val !== undefined) params[key] = decodeURIComponent(val!);\n    }\n    return { matched: true, params };\n  }\n\n  private collectMiddlewares(): Array<Middleware<any, any>> {\n    if (this._mwChainCache) return this._mwChainCache;\n    const chain: Array<Middleware<any, any>> = [];\n    const stack: ApiComponent<any>[] = [];\n    let p: ApiComponent<any> | undefined = this;\n    while (p) { stack.push(p); p = p.parent; }\n    for (let i = stack.length - 1; i >= 0; i--) {\n      const n = stack[i]!;\n      for (const mw of (n as any).middlewares as Array<Middleware<any, any>>) chain.push(mw);\n    }\n    this._mwChainCache = chain;\n    return chain;\n  }\n\n  async dispatch(req: Request, url: URL, inheritedLocals?: Record<string, any>): Promise<Finalish | undefined> {\n    const path = url.pathname;\n    // Check self\n    const selfMatch = this.match(path);\n    if (selfMatch.matched) {\n      const handler = this.handlers[req.method as HttpMethod];\n      if (handler) {\n        const { statusFn, headerFn, resFn } = (inheritedLocals && (inheritedLocals as any).statusFn && (inheritedLocals as any).headerFn)\n          ? { statusFn: (inheritedLocals as any).statusFn, headerFn: (inheritedLocals as any).headerFn, resFn: (inheritedLocals as any).resFn }\n          : createResponseKit();\n        const inheritedQuery = (inheritedLocals && (inheritedLocals as any).query) as Record<string, string> | undefined;\n        const query: Record<string, string> = inheritedQuery ? inheritedQuery : (() => {\n          const q: Record<string, string> = {};\n          url.searchParams.forEach((v, k) => (q[k] = v));\n          return q;\n        })();\n        const headers = req.headers;\n        let body: any = (inheritedLocals && (inheritedLocals as any).body !== undefined)\n          ? (inheritedLocals as any).body\n          : undefined;\n        if (body === undefined) body = await parseBody(req, headers);\n        const base = {\n          self: this,\n          req,\n          query,\n          param: selfMatch.params,\n          header: headerFn,\n          status: statusFn,\n          res: resFn,\n          body,\n          headers,\n        } as const;\n\n        const mwBase = {\n          req,\n          url,\n          query,\n          param: selfMatch.params,\n          header: headerFn,\n          status: statusFn,\n          res: resFn,\n          body,\n          headers,\n        } as const;\n\n        const chain = this.collectMiddlewares();\n        const locals: Record<string, any> = { ...(inheritedLocals || {}) };\n        // Reuse one object per chain\n        const mwCtx: any = { ...mwBase, ...locals, next: undefined as any };\n\n        const run = async (i: number): Promise<Finalish | undefined> => {\n          if (i < chain.length) {\n            const mw = chain[i]!;\n            mwCtx.next = async (extra?: Record<string, any>) => {\n              if (extra && typeof extra === \"object\") {\n                Object.assign(locals, extra);\n                Object.assign(mwCtx, extra);\n              }\n              return await run(i + 1);\n            };\n            return await mw(mwCtx);\n          }\n          const finalCtx = { ...(locals as any), ...base } as any;\n          return await handler(finalCtx);\n        };\n        return await run(0);\n      }\n    }\n    // Check children\n    for (const ch of this.children) {\n      const out = await ch.dispatch(req, url, inheritedLocals);\n      if (out !== undefined) return out;\n    }\n    return undefined;\n  }\n}\n\nexport function api(path: string) {\n  return new ApiComponent(path);\n}\n",
    "import type { ResponseBuilder, Finalish, FinalResult, FinalResultOf } from \"../http/response\";\n\nexport type MiddlewareContext<L extends object = {}> = {\n  req: Request;\n  url: URL;\n  query: Record<string, string>;\n  param: Record<string, string>;\n  header: (key: string | Record<string, string>, value?: string) => ResponseBuilder;\n  status: (code: number) => ResponseBuilder;\n  res: <T>(body: T) => FinalResultOf<T>;\n  body: any;\n  headers: Headers;\n} & L;\n\nexport type Middleware<In extends object, Add extends object> = (\n  ctx: MiddlewareContext<In> & { next: (extra?: Add) => Promise<Finalish | undefined> }\n) => Promise<Finalish | undefined> | Finalish | undefined;\n\nexport function middleware<Add extends object = {}>(fn: Middleware<{}, Add>): Middleware<{}, Add>;\nexport function middleware<In extends object = {}, Add extends object = {}>(fn: Middleware<In, Add>): Middleware<In, Add>;\nexport function middleware(fn: any): any { return fn; }\n",
    "function assertPath(path){if(typeof path!==\"string\")throw new TypeError(\"Path must be a string. Received \"+JSON.stringify(path))}function normalizeStringPosix(path,allowAboveRoot){var res=\"\",lastSegmentLength=0,lastSlash=-1,dots=0,code;for(var i=0;i<=path.length;++i){if(i<path.length)code=path.charCodeAt(i);else if(code===47)break;else code=47;if(code===47){if(lastSlash===i-1||dots===1);else if(lastSlash!==i-1&&dots===2){if(res.length<2||lastSegmentLength!==2||res.charCodeAt(res.length-1)!==46||res.charCodeAt(res.length-2)!==46){if(res.length>2){var lastSlashIndex=res.lastIndexOf(\"/\");if(lastSlashIndex!==res.length-1){if(lastSlashIndex===-1)res=\"\",lastSegmentLength=0;else res=res.slice(0,lastSlashIndex),lastSegmentLength=res.length-1-res.lastIndexOf(\"/\");lastSlash=i,dots=0;continue}}else if(res.length===2||res.length===1){res=\"\",lastSegmentLength=0,lastSlash=i,dots=0;continue}}if(allowAboveRoot){if(res.length>0)res+=\"/..\";else res=\"..\";lastSegmentLength=2}}else{if(res.length>0)res+=\"/\"+path.slice(lastSlash+1,i);else res=path.slice(lastSlash+1,i);lastSegmentLength=i-lastSlash-1}lastSlash=i,dots=0}else if(code===46&&dots!==-1)++dots;else dots=-1}return res}function _format(sep,pathObject){var dir=pathObject.dir||pathObject.root,base=pathObject.base||(pathObject.name||\"\")+(pathObject.ext||\"\");if(!dir)return base;if(dir===pathObject.root)return dir+base;return dir+sep+base}function resolve(){var resolvedPath=\"\",resolvedAbsolute=!1,cwd;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path;if(i>=0)path=arguments[i];else{if(cwd===void 0)cwd=process.cwd();path=cwd}if(assertPath(path),path.length===0)continue;resolvedPath=path+\"/\"+resolvedPath,resolvedAbsolute=path.charCodeAt(0)===47}if(resolvedPath=normalizeStringPosix(resolvedPath,!resolvedAbsolute),resolvedAbsolute)if(resolvedPath.length>0)return\"/\"+resolvedPath;else return\"/\";else if(resolvedPath.length>0)return resolvedPath;else return\".\"}function normalize(path){if(assertPath(path),path.length===0)return\".\";var isAbsolute=path.charCodeAt(0)===47,trailingSeparator=path.charCodeAt(path.length-1)===47;if(path=normalizeStringPosix(path,!isAbsolute),path.length===0&&!isAbsolute)path=\".\";if(path.length>0&&trailingSeparator)path+=\"/\";if(isAbsolute)return\"/\"+path;return path}function isAbsolute(path){return assertPath(path),path.length>0&&path.charCodeAt(0)===47}function join(){if(arguments.length===0)return\".\";var joined;for(var i=0;i<arguments.length;++i){var arg=arguments[i];if(assertPath(arg),arg.length>0)if(joined===void 0)joined=arg;else joined+=\"/\"+arg}if(joined===void 0)return\".\";return normalize(joined)}function relative(from,to){if(assertPath(from),assertPath(to),from===to)return\"\";if(from=resolve(from),to=resolve(to),from===to)return\"\";var fromStart=1;for(;fromStart<from.length;++fromStart)if(from.charCodeAt(fromStart)!==47)break;var fromEnd=from.length,fromLen=fromEnd-fromStart,toStart=1;for(;toStart<to.length;++toStart)if(to.charCodeAt(toStart)!==47)break;var toEnd=to.length,toLen=toEnd-toStart,length=fromLen<toLen?fromLen:toLen,lastCommonSep=-1,i=0;for(;i<=length;++i){if(i===length){if(toLen>length){if(to.charCodeAt(toStart+i)===47)return to.slice(toStart+i+1);else if(i===0)return to.slice(toStart+i)}else if(fromLen>length){if(from.charCodeAt(fromStart+i)===47)lastCommonSep=i;else if(i===0)lastCommonSep=0}break}var fromCode=from.charCodeAt(fromStart+i),toCode=to.charCodeAt(toStart+i);if(fromCode!==toCode)break;else if(fromCode===47)lastCommonSep=i}var out=\"\";for(i=fromStart+lastCommonSep+1;i<=fromEnd;++i)if(i===fromEnd||from.charCodeAt(i)===47)if(out.length===0)out+=\"..\";else out+=\"/..\";if(out.length>0)return out+to.slice(toStart+lastCommonSep);else{if(toStart+=lastCommonSep,to.charCodeAt(toStart)===47)++toStart;return to.slice(toStart)}}function _makeLong(path){return path}function dirname(path){if(assertPath(path),path.length===0)return\".\";var code=path.charCodeAt(0),hasRoot=code===47,end=-1,matchedSlash=!0;for(var i=path.length-1;i>=1;--i)if(code=path.charCodeAt(i),code===47){if(!matchedSlash){end=i;break}}else matchedSlash=!1;if(end===-1)return hasRoot?\"/\":\".\";if(hasRoot&&end===1)return\"//\";return path.slice(0,end)}function basename(path,ext){if(ext!==void 0&&typeof ext!==\"string\")throw new TypeError('\"ext\" argument must be a string');assertPath(path);var start=0,end=-1,matchedSlash=!0,i;if(ext!==void 0&&ext.length>0&&ext.length<=path.length){if(ext.length===path.length&&ext===path)return\"\";var extIdx=ext.length-1,firstNonSlashEnd=-1;for(i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(code===47){if(!matchedSlash){start=i+1;break}}else{if(firstNonSlashEnd===-1)matchedSlash=!1,firstNonSlashEnd=i+1;if(extIdx>=0)if(code===ext.charCodeAt(extIdx)){if(--extIdx===-1)end=i}else extIdx=-1,end=firstNonSlashEnd}}if(start===end)end=firstNonSlashEnd;else if(end===-1)end=path.length;return path.slice(start,end)}else{for(i=path.length-1;i>=0;--i)if(path.charCodeAt(i)===47){if(!matchedSlash){start=i+1;break}}else if(end===-1)matchedSlash=!1,end=i+1;if(end===-1)return\"\";return path.slice(start,end)}}function extname(path){assertPath(path);var startDot=-1,startPart=0,end=-1,matchedSlash=!0,preDotState=0;for(var i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(code===47){if(!matchedSlash){startPart=i+1;break}continue}if(end===-1)matchedSlash=!1,end=i+1;if(code===46){if(startDot===-1)startDot=i;else if(preDotState!==1)preDotState=1}else if(startDot!==-1)preDotState=-1}if(startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1)return\"\";return path.slice(startDot,end)}function format(pathObject){if(pathObject===null||typeof pathObject!==\"object\")throw new TypeError('The \"pathObject\" argument must be of type Object. Received type '+typeof pathObject);return _format(\"/\",pathObject)}function parse(path){assertPath(path);var ret={root:\"\",dir:\"\",base:\"\",ext:\"\",name:\"\"};if(path.length===0)return ret;var code=path.charCodeAt(0),isAbsolute2=code===47,start;if(isAbsolute2)ret.root=\"/\",start=1;else start=0;var startDot=-1,startPart=0,end=-1,matchedSlash=!0,i=path.length-1,preDotState=0;for(;i>=start;--i){if(code=path.charCodeAt(i),code===47){if(!matchedSlash){startPart=i+1;break}continue}if(end===-1)matchedSlash=!1,end=i+1;if(code===46){if(startDot===-1)startDot=i;else if(preDotState!==1)preDotState=1}else if(startDot!==-1)preDotState=-1}if(startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1){if(end!==-1)if(startPart===0&&isAbsolute2)ret.base=ret.name=path.slice(1,end);else ret.base=ret.name=path.slice(startPart,end)}else{if(startPart===0&&isAbsolute2)ret.name=path.slice(1,startDot),ret.base=path.slice(1,end);else ret.name=path.slice(startPart,startDot),ret.base=path.slice(startPart,end);ret.ext=path.slice(startDot,end)}if(startPart>0)ret.dir=path.slice(0,startPart-1);else if(isAbsolute2)ret.dir=\"/\";return ret}var sep=\"/\",delimiter=\":\",posix=((p)=>(p.posix=p,p))({resolve,normalize,isAbsolute,join,relative,_makeLong,dirname,basename,extname,format,parse,sep,delimiter,win32:null,posix:null});var path_default=posix;export{sep,resolve,relative,posix,parse,normalize,join,isAbsolute,format,extname,dirname,delimiter,path_default as default,basename,_makeLong};",
    "import { api, middleware } from \"../index.ts\";\n\ntype JwtPayload = { sub: string; name: string };\n\n// For demo: very naive verifier that treats the token as base64(JSON)\nfunction verifyToken(token: string): JwtPayload | undefined {\n  try {\n    const json = atob(token);\n    const obj = JSON.parse(json);\n    if (obj && typeof obj.name === \"string\") return obj as JwtPayload;\n  } catch {}\n  return undefined;\n}\n\nconst jwtAuth = middleware<{ user: JwtPayload }>(({ next, headers, status }) => {\n  const auth = headers.get(\"authorization\") || \"\";\n  const token = auth.startsWith(\"Bearer \") ? auth.slice(7) : \"\";\n  const payload = token ? verifyToken(token) : undefined;\n  if (payload) return next({ user: payload });\n  return status(401).res({ message: \"unauthorized\" });\n});\n\nconst testApi = api(\"/test\")\n.use(jwtAuth)\n.get(({res, user}) => res(`your name is ${user?.name}`));\n\nexport const myApi = api(\"/auth/me\")\n  .use(jwtAuth)\n  .route(testApi)\n  .get(({ user, res }) => res({msg:`your name is ${user.name}`}))\n  .post(({body, res}) => {\n    const { data } = body;\n    return res({ data })\n  })\n  .put(({body, res}) => {\n    const { data } = body;\n    return res({ data })\n  });",
    "import { html, ui, ValueOrFn, UIContext, component } from \"../index.ts\";\nimport { myApi } from \"./counter.api.ts\";\n\nconst TestComponent = component(ui('div')\n.flexCol()\n.state(\"rv\", 1)\n.state(\"omni\", 0)\n.prop(\"r\", ({self}, v?: string) => self.style(\"borderRadius\", v || \"1rem\"))\n.prop(\"newt\", ({self}, v: string) => self.style(\"margin\", v || \"1rem\"))\n.style(\"textAlign\", \"center\")\n.state(\"test\", \"1rem\")\n)\n\nTestComponent.newt(\"24px\").r(({state})=> state.test)( ({self}) => self.state.test )\n\n// Demo: Checkbox component using .define() to accept a boolean at call-time via ctx.children\nconst Checkbox = component(ui('input').type('checkbox')\n  .define(({ self, children }) => self.attr('checked', !!children[0])));\n\nexport const App = html()\n.title(\"Counter\")\n.meta(\"description\", \"Counter example\")\n(\n  ui(\"div\")\n  .state(\"tiny\", \"tiny\")\n  .state(\"api\", \"\")\n  .p(14)\n  .flexCol()\n  (\n    ui(\"h1\")(\"Counter\"),\n    ui(\"p\")(\"Welcome to counter example\"),\n    // Using Checkbox(true) via .define() invoker\n    Checkbox(true),\n    ui(\"button\")\n    .state(\"count\", 10)\n    .p(({self})=> self.state.count)\n    .onClick(({ parent, self }) => {\n      if (parent) parent.state.tiny = (parent.state.tiny ?? \"tiny\") + \" tiny\";\n      self.state.count = self.state.count / 2;\n    })\n    (({ parent, self }) => `Tiny: ${parent?.state.tiny} (count: ${self.state.count})`),\n    ui(\"button\")\n    .state(\"selfstate\", 0)\n    .p(10)\n    .onClick(async ({ parent, state }) => {\n      state.selfstate = state.selfstate + 1;\n      const data = await myApi.client.get({query:{q:\"gay\"}});\n      if (parent) parent.state.api = String(data ?? \"\");\n    })\n    (\"Fetch API\"),\n    ui(\"p\")(({ parent }) => String(parent?.state.api ?? \"\"))\n  )\n);\n"
  ],
  "mappings": "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",
  "debugId": "34E9D60BDA47499A64756E2164756E21",
  "names": []
}